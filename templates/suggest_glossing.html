<!DOCTYPE html>
<html>
<head>
	<title>Glossing Suggestion</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
	<style type="text/css">
	.button {
		background-color: #4CAF50; /* Green */
		border: none;
		color: white;
		text-align: center;
		text-decoration: none;
		display: inline-block;
		font-size: 16px;
		border-radius: 8px;
	}
/*button:active{
    background:olive;
}
button:focus{
    background:olive;
}
*/


</style>
</head>


<body>



	{% extends 'base.html' %}


	{% block content %}


	<h1>Suggested gloss</h1>


	<!-- <p id='output'></p> -->
	<a class=button2 href="#bottom">Go To buttom</a>
	<div id='top'></div>

	<div id="container">
		{%for item in gloss_generated %}
		<h4>Original Sentence: </h4>
		{%for gloss_pair in item%}
		{{gloss_pair.0}} 
		{%endfor%}
		<br>

		<h4>Suggested Gloss: <br></h4>
		<!-- <div id="{{item}}"></div> -->
		<div>
			{%for gloss_pair in item%}
				{{gloss_pair.0}}: 
				
				{%for option in gloss_pair.1%}
					<input type="checkbox" class="{{loop.index}}" id='{{option[0]}}')">{{option[0]}}</input>
					<input type="text" name=""> </input>
				{%endfor%}
				<br>
			{%endfor%}
		</div>
		{%endfor%}
		<script type="text/javascript">				
			var first = document.getElementsByClassName('1')
			for (var i = 0; i < first.length; i++) {
				first[i].checked = true
			}
		</script>	
		
	</div>

	<div id='bottom'></div>
	<a class=button2 href="#top">Go To top</a><br>
	<button onclick="download()">Download</button>



	<script>

		function download() {
			var ancestor = document.getElementById('container');

			descendents = ancestor.getElementsByTagName('div');
			output = []
			counter = 0
			for (i = 0; i < descendents.length; ++i) {
				counter += 1
				var tmp_output = ""
				tmp = descendents[i].getElementsByTagName('input')
				
				for (var j = 0; j < tmp.length; j++) {
					if (tmp[j].type == 'checkbox'){
						if(tmp[j].checked){
							tmp_output += String(tmp[j].id)+" "
						}
					}
					if (tmp[j].type == 'text' && tmp[j].value != ""){
						tmp_output += String(tmp[j].value)+" "
					}
				}
				if (tmp_output != ""){
					output.push(String(counter)+": "+tmp_output+'\n')
				}
				
			}
	   		// console.log(output)

	   		var element = document.createElement('a');
	   		element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(output.join("")));
	   		element.setAttribute('download', "result.txt");

	   		element.style.display = 'none';
	   		document.body.appendChild(element);

	   		element.click();

	   		document.body.removeChild(element);
	   	}
	   </script>

	   {% endblock %}
	</body>
	</html>
